appId: com.zoterorefextractor.app
productName: Zotero Ref Extractor
copyright: Copyright (c) 2024

directories:
  output: release
  buildResources: build

files:
  - dist/**/*
  - dist-electron/**/*
  - "!**/*.map"

extraResources:
  - from: "../../dist-bundle"
    to: "core"
    filter:
      - "**/*"
  # External packages with native modules (yauzl-promise and its deps)
  - from: "../../node_modules/yauzl-promise"
    to: "core/node_modules/yauzl-promise"
    filter:
      - "**/*"
  - from: "../../node_modules/@node-rs/crc32"
    to: "core/node_modules/@node-rs/crc32"
    filter:
      - "**/*"
  - from: "../../node_modules/@node-rs/crc32-win32-arm64-msvc"
    to: "core/node_modules/@node-rs/crc32-win32-arm64-msvc"
    filter:
      - "**/*"
  - from: "../../node_modules/is-it-type"
    to: "core/node_modules/is-it-type"
    filter:
      - "**/*"
  - from: "../../node_modules/simple-invariant"
    to: "core/node_modules/simple-invariant"
    filter:
      - "**/*"

extraMetadata:
  main: dist-electron/main.js

mac:
  category: public.app-category.productivity
  target:
    - dmg
    - zip
  artifactName: "${productName}-${version}-${os}-${arch}.${ext}"

win:
  target:
    - nsis
  artifactName: "${productName}-${version}-${os}.${ext}"

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true

linux:
  category: Office
  target:
    - AppImage
  artifactName: "${productName}-${version}-${os}-${arch}.${ext}"

publish: null
